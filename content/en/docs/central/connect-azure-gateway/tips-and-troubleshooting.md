---
title: Get help with Connected Azure Gateway
linkTitle: Get help with Connected Azure Gateway
draft: false
weight: 40
description: This section provides troubleshooting, known limitations
  and	restrictions that you may encounter while you are working with the
  connected managed environment for Azure Gateway within Amplify Central. It
  also provides tips you may find useful when working with this environment.
---

## Troubleshooting

| Question                                                   | Answer                                                                                                                                                                       |   |
|------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---|
| Why can't Discovery Agent connect to Azure Gateway?    | Make sure that the Azure configuration (Subscription, tenantID and service principal) are correct.                     |   |
| Why can't Traceability Agent connect to Azure event hub? | Make sure that the Azure configuration (Subscription, tenantID and service principal) are correct.                          |   |
| Why can't my agents connect to Amplify Central?            | Go to Amplify Central UI > Access > Service Accounts and make sure that the Service Account is correctly named and valid. Make sure that the organizationID and team are correct. |   |
| I have the following error: `Amplify Central - FAIL (error creating request header. bad response from AxwayId: 400 Bad Request)`| Make sure that the Service Account set up is properly spelled (refer to `central.clientId` property). Verify that the public/private key pair is the one corresponding to the Service Account |   |
| Why don't I see traffic in Amplify Central?                | Make sure that the Condor URL is accessible from the machine where Traceability Agent is installed.                                                                          |   |

## Limitations

* Azure versioning not taken into account while discovering APIs
* Discovery Agent is not able to send credentials to subscribers

## Error Codes and Mitigations

| Code # | Description                                                                                                 | Mitigation                                                                                                                                                                                                                                                                                                    |
| ------ | ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1001   | initialization error checking for dependencies to respond, possibly network or settings                     | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 1002   | timeout error checking for dependencies to respond, possibly network or settings                            | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 1003   | Periodic health checker failed.  Services are not ready                                                     | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 1100   | general configuration error in CENTRAL                                                                      | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the Central Config                                                                                                                                                  |
| 1101   | error attempting to query for ENVIRONMENT                                                                   | Check that the Environment Name in config matches the name on Amplify Central                                                                                                                                                                                                                                 |
| 1102   | could not find specified team in Amplify Central, check CENTRAL_TEAM                                        | Check that the Team Name in config matches the name on Amplify Central                                                                                                                                                                                                                                        |
| 1110   | connection to Amplify Central failed                                                                        | See Administer Azure network traffic                                                                                                                                       |
| 1120   | request to Amplify Central failed                                                                           | See Administer Azure network traffic and that the Environment Name in config matches the name on Amplify Central                                                           |
| 1130   | request to get authentication token failed                                                                  | Check the Auth configuration (ClientId, Private and Public keys/index.html). See [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                |
| 1131   | token retrieved but was invalid on request to Amplify Central                                               | Check the Auth configuration (ClientId, Private and Public keys/index.html). See [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                |
| 1140   | couldn't find a subscriber email address based on the ID in the subscription event                          | The user requesting this subscription may not have an Email address set                                                                                                                                                                                                                                       |
| 1141   | couldn't contact Amplify Central for subscription, possible network error                                   | See Administer Azure network traffic                                                                                                                                       |
| 1142   | couldn't get subscription data from Amplify Central                                                         | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 1143   | couldn't create or update subscription schema data                                                          | See Administer Azure network traffic                                                                                                                                       |
| 1144   | unexpected response when managing subscription schema on Amplify Central                                    | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 1145   | unable to create webhook for the subscription definition                                                    | See Administer Azure network traffic                                                                                                                                       |
| 1146   | unable to create secret  for the subscription definition                                                    | See Administer Azure network traffic                                                                                                                                       |
| 1147   | error parsing filter in configuration. Syntax error                                                         | See Discover APIs                                                                                                                                                           |
| 1148   | error parsing filter in configuration. Unrecognized expression                                              | See Discover APIs                                                                                                                                                           |
| 1149   | error parsing filter in configuration                                                                       | See Discover APIs                                                                                                                                                           |
| 1150   | error parsing filter in configuration. Invalid call argument                                                | See Discover APIs                                                                                                                                                           |
| 1151   | error parsing filter in configuration. Invalid selector type                                                | See Discover APIs                                                                                                                                                           |
| 1152   | error parsing filter in configuration. Invalid selector expression                                          | See Discover APIs                                                                                                                                                           |
| 1153   | error parsing filter in configuration. Invalid operator                                                     | See Discover APIs                                                                                                                                                           |
| 1154   | error parsing filter in configuration. Unrecognized condition                                               | See Discover APIs                                                                                                                                                           |
| 1155   | error getting subscription definition properties in Amplify Central                                         | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                      |
| 1156   | error updating subscription definition properties in Amplify Central                                        | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                       |
| 1157   | error getting catalog item API server info properties in Amplify Central | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                       |
| 1300   | error communicating with server for subscription notifications (SMTP or webhook/index.html), check SUBSCRIPTION config | See Manage subscription workflow                                                                                                                                   |
| 1301   | subscription notifications not configured, check SUBSCRIPTION config                                        | See Manage subscription workflow                                                                                                                                              |
| 1302   | error creating data for sending subscription notification                                                   | Check API Manager UI for configuration of API and its applications                                                                                                                                                                                                                             |
| 1303   | email template not updated because an invalid authType was supplied                                         | Check API Manager UI for configuration of API and its applications, specifically enabled authentication on the application                                                                                                                                                                      |
| 1304   | no email template found for action                                                                          | See Manage subscription workflow for the SMTP template settings                                                                                                               |
| 1305   | error sending email to SMTP server                                                                          | See Manage subscription workflow for the SMTP settings                                                                                                                        |
| 1401   | error parsing configuration values, check the config referenced in error                                                                 | See Manage subscription workflow                                                                         |
| 1402   | error in overriding configuration using file with environment variables                                                                | Make sure the env_vars file exists and is properly formatted                                                                                               |
| 1403   | invalid value for statusHealthCheckPeriod. Value must be between 1 and 5 minutes                                                       | Make sure the env_vars file exists and is properly formatted                                                                                               |
| 1404   | invalid value for statusHealthCheckInterval. Value must be between 30 seconds and 5 minutes                                           | Make sure the env_vars file exists and is properly formatted                                                                                               |
| 1405   | a key file could not be read                          | For binary deployment, validate that your user running the agent has access to the key file. For docker deployment on Linux, give the User ID in the container read access to the file. `setfacl -m u:2500:r private_key.pem`                                                                                               |
| 1410 | invalid configuration settings for the logging setup                                                        | See [Agent variables](/docs/central/connect-azure-gateway/) for logging configuration options            |
| 1500   | could not set proxy                                                                                         | Check the TRACEABILITY_PROXYURL setting here [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                |
| 1501   | failed to publish events                                                                                    | See Administer Azure network traffic                                                                                                                                       |
| 1502   | error closing connection with Condor                                                                        | Likely a timeout error, processing will retry automatically                                                                                                                                                                                                                                                   |
| 1503   | http transport is not connected                                                                             | Check the TRACEABILITY_HOST setting here [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                    |
| 1504   | failed to encode the json content                                                                           | Internal system error. Contact your system administrator                                                                                                                                                                                                                                                      |
| 1505   | invalid traceability config                                                                                 | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the Traceability Config                                                                                                                                             |
| 1900 | unsupported system for service installation                                                                 | The service installation only supports Linux   |
| 1901 | systemd is required for service installation                                                                | The service installation requires an OS with systemd        |
| 1902 | service management requires root privileges                                                                 | All service actions require root privileges      |
| 1903 | service has already been installed                                                                          | The service has already been installed, you can use "remove" to clean it up and then install it again   |
| 1904 | service is running and cannot be removed until stopped                                                      | The service has to be stopped before removing it  |
| 1905 | service is not yet installed                                                                                | The service has to be installed prior to taking any other action        |
| 1906 | service is already running                                                                                  | The service is already running, nothing to do      |
| 1907 | service is already stopped                                                                                  | The service is already stopped, nothing to do      |
| 3000 | configuration error for API Manager                                                                           | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the Central Config                                                                                                                                                  |
| 3001 | unexpected response code, api path not known                                                                  | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config                                                                                                                                              |
| 3002 | unexpected response code with api path                                                                        | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config                                                                                                                                              |
| 3003 | unexpected API Manager response code and details                                                              | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config                                                                                                                                          |
| 3004 | could not parse response from API Manager                                                                     | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config                                                                                                                                              |
| 3005 | could not make request to API Manager                                                                        | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables)      |
| 3006 | could not create the body of the request to API Manager | Internal system error. Contact your system administrator |
| 3051 | error creating a service in Amplify Central for frontend proxy  | See Administer Azure network traffic    |
| 3052 | error getting swagger for frontend proxy                        | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config   |
| 3053 | error getting definition and resource type for frontend proxy   | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config   |
| 3054 | error updating the cache                                        | Internal system error. Contact your system administrator                                                                                                                   |
| 3055 | error getting backendAPI definition for proxy                   | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config    |
| 3056 | error updating service in Amplify Central for frontend proxy    | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config   |
| 3057 | error updating subscription in Amplify Central                  | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config   |
| 3058 | the API for the subscription is unpublished on API Manager                                                    | Verify that the Front End Proxy in API Manager is published                                                                                                                                                                                                                                  |
| 3059 | the authentication for API and app on API Manager do not match                                                | Verify that the Front End Proxy and app in API Manager have matching authentication types                                                                                                                                                                                                  |
| 3101 | unable to authorize proxy to subscribing application                                                          | Verify the Front End Proxy is associated with the application in API Manager                                                                                                                                                                                                                                  |
| 3102 | API authorization is not enabled for application                                                              | Verify the Front End Proxy is enabled on the application in API Manager                                                                                                                                                                                                                                       |
| 3103 | could not find needed authorization type on application                                                       | Verify the application has the expected authentication enabled in API Manager                                                                                                                                                                                                                                 |
| 3104 | could not find the application specified                                                                      | Verify the application exists in API Manager                                                                                                                                                                                                                                                                  |
| 3105 | the application specified is disabled                                                                         | Enable the application in API Manager                                                                                                                                                                                                                                                                         |
| 3106 | the application does not have the specified subscription id                                                   | The Subscription ID may have been removed from the application                                                                                                                                                                                                                                                |
| 3107 | unexpected error updating an application with the subscription                                                | Does the agent's user have permissions? See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Manager Config                                                                                                       |
| 3108 | unexpected error adding the API Access to the application                                                     | See Manage subscription workflow and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API manager Config |
| 3109 | proxy is not authorized for the organization of the subscribing application | See Manage subscription workflow |
| 3110 | unable to create the application for the subscription                                          | See Manage subscription workflow and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API manager Config |
| 3111 | unexpected error while creating the application                                                     | See Manage subscription workflow and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API manager Config |
| 3112 | unexpected error while creating the application authentication                                                     | See Manage subscription workflow and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API manager Config |
| 3113 | unexpected error while removing the application authentication                                                     | See Manage subscription workflow and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API manager Config |
| 3500 | configuration error with getHeaders enabled, check the config item specified                                  | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Gateway Config                                                                                                                                              |
| 3501 | could not communicate with API Gateway Host                                                                   | See Administer Azure network traffic and [Agent variables](/docs/central/connect-azure-gateway/agent-variables) |
| 3502 | did not receive expected response while checking health of API Gateway                                        | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Gateway Auth Config                                                                                                                                         |
| 3510 | log event not expected it has no message                                                                      |  Check the Installing the Traceability Agent section here [Deploy your agents - advanced functionality](/docs/central/connect-azure-gateway/deploy-your-agents/). Make sure the include_lines setting is correct                                    |
| 3511 | the log event message could not be parsed                                                                     | Check the Installing the Traceability Agent section here [Deploy your agents - advanced functionality](/docs/central/connect-azure-gateway/deploy-your-agents/). Make sure the include_lines setting is correct                                     |
| 3512 | could not retrieve the transaction data from API Gateway                                                      | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Gateway Auth Config                                                                                                                                         |
| 3513 | error hit while processing the transaction data                                                               | The transaction protocol may not be supported                                                                                                                                                                                                                                                                 |
| 3514 | the headers for the transaction could not be processed                                                        | The transaction protocol may not be supported                                                                                                                                                                                                                                                                 |
| 3515 | the protocol details of the transaction could not be processed                                                | The transaction protocol may not be supported                                                                                                                                                                                                                                                                 |
| 3516 | error creating the event for Amplify Visibility                                                               | Check the Installing the Traceability Agent section here [Deploy your agents - advanced functionality](/docs/central/connect-azure-gateway/deploy-your-agents/). Make sure the include_lines setting is correct                                     |
| 3530 | error sending request to API Gateway host                                                                     | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Gateway Config                                                                                                                                              |
| 3531 | unexpected response code received from API Gateway request                                                    | See [Agent variables](/docs/central/connect-azure-gateway/agent-variables) for the API Gateway Config                                                                                                                                              |
| 3600 | could not set proxy                                                                                           | Check the LOGSTASH_PROXYURL setting here [Agent variables](/docs/central/connect-azure-gateway/agent-variables)                                                                                                                                    |
| 3601 | failed to publish events                                                                                      | See Administer Azure network traffic                                                                                                                                  |
| 3602 | error closing connection with Condor                                                                          | Likely a timeout error, processing will retry automatically                                                                                                                                                                                                                                                   |
